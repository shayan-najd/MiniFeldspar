#!/bin/bash

for a in IP CRC FFT
do
    for n in MiniWellScoped TemplateHaskell
    do
	for i in {1..10}
	do
	    ./clean
	    rm ${a}${n}
	    /usr/bin/time -f "%e" -a -o time${a}${n}Compile ghc -o ${a}${n} Examples/Feldspar/${a}/${n}.hs  -XRankNTypes -XPolyKinds -XGADTs -XStandaloneDeriving -XDeriveTraversable -XDeriveFoldable -XDeriveFunctor -XTemplateHaskell -XImplicitParams -XMultiParamTypeClasses -XTypeOperators -XDataKinds -XFlexibleInstances -XPatternSynonyms -XTypeFamilies -XScopedTypeVariables -XConstraintKinds
	done
    done
done
./clean
for f in Nrm NoNrm
do
    for a in IP CRC FFT
    do
	for n in MiniWellScoped TemplateHaskell
	do
	    for i in {1..10}
	    do
		rm ${f}${a}${n}.c
		/usr/bin/time -f "%e" -a -o time${f}${a}${n}Gen ./${a}${n} ${f} 
	    done
	done
    done
done
./clean
for f in Nrm NoNrm
do
    for a in IP CRC FFT
    do
	for n in MiniWellScoped TemplateHaskell
	do
	    for i in {1..10}
	    do
		rm ${f}${a}${n}
		/usr/bin/time -f "%e" -a -o time${f}${a}${n}GCC gcc -o ${f}${a}${n} ${f}${a}${n}.c -lm -std=c99 
	    done
	done
    done
done
for f in Nrm NoNrm
do
    for a in IP CRC FFT
    do
	for n in MiniWellScoped TemplateHaskell
	do
	    for i in {1..10}
	    do
		if [ ${a}${n} != FFTMiniWellScoped ]; then
		    rm ImageFFT.pgm
		    rm Image.pbm
		    /usr/bin/time -f "%e" -a -o time${f}${a}${n}Run ./${f}${a}${n} 
                fi
	    done
	done
    done
done
